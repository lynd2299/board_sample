# シーケンス図

## 留意事項

このmarkdownFileは、ChatGPTにモックを作ってもらい、製作者が加筆修正しています。  
もしこれがよろしくないなら…チームで話し合いましょう

```markdown
# 入力したprompt一覧

## 1
あなたは今から掲示板機能を作成する開発者です。これから以下の条件をもとに、markdown形式でシーケンス図を作ってください

【条件】
・成果物はマークダウンファイルである
・ユーザーはログインしないと掲示板を利用できない
・ユーザーは新しいスレッドを作成できる。
・ユーザーはスレッドにメッセージ（返信）を投稿できる。
・ユーザーはスレッドのメッセージを閲覧できる。
・ユーザーは独自のユーザーネームを設定できる。
・ユーザーは既に存在しているスレッドを検索できる。

## 2
先ほどのmarkdownを以下のparticipantで作ってみてください

participant ユーザー
participant ブラウザ
participant フロントエンド(React)
participant サーバーサイド(API)
participant データベース

## 3
独自のユーザーネーム設定機能を、以下のparticipantでマークダウンで記述してください

participant ユーザー
participant ブラウザ
participant フロントエンド(React)
participant ローカルストレージ

```

## ログイン機能
```mermaid
sequenceDiagram
    participant ユーザー
    participant ブラウザ
    participant フロントエンド(React)
    participant サーバーサイド(API)
    participant データベース

    ユーザー ->> ブラウザ: ログインボタンを表示
    ブラウザ ->> フロントエンド(React): ログイン処理要求、POST
    フロントエンド(React) ->> サーバーサイド(API): API要求（ログイン）
    サーバーサイド(API) ->> データベース: ユーザーログイン情報取得

    alt ログイン情報がある（正常系）
      データベース ->> サーバーサイド(API): ユーザーログイン情報
      サーバーサイド(API) ->> フロントエンド(React): ユーザーログイン情報応答
      フロントエンド(React) ->> ブラウザ: ユーザーログイン情報応答
      ブラウザ ->> ユーザー: ログイン許可及びホーム画面が表示
    else ログイン情報がない（異常系）
      データベース ->> サーバーサイド(API): 返却値なし
      サーバーサイド(API) ->> フロントエンド(React): ユーザーログイン情報応答
      フロントエンド(React) ->> ブラウザ: ユーザーログイン情報応答
      ブラウザ ->> ユーザー: ログインできない旨の内容が表示
    end
```

## スレッドの新規作成
```mermaid
sequenceDiagram
    participant ユーザー
    participant ブラウザ
    participant フロントエンド(React)
    participant サーバーサイド(API)
    participant データベース

    %% ページ表示
    ユーザー ->> ブラウザ: スレッド作成ボタンを押す
    ブラウザ --> フロントエンド(React): スレッド作成ページ情報要求
    フロントエンド(React) --> サーバーサイド(API): API要求（スレッド作成ページ遷移）
    サーバーサイド(API)　--> フロントエンド(React)  : スレッド作成ページ情報の返却
    フロントエンド(React) --> ブラウザ : ページレンダリング、<br />スレッド作成ページの表示
    ブラウザ ->> ユーザー : スレッドページ作成画面の確認

    %% スレッド作成処理
    ユーザー ->> ブラウザ: スレッド内容を入力し、<br />作成ボタンを押す
    ブラウザ ->> フロントエンド(React): スレッド作成要求

    alt フロントエンドのバリデーションに<br />ひっかかった場合（異常系）
      フロントエンド(React) -->> ブラウザ: エラーポップアップの表示
      ブラウザ -->> ユーザー: エラー内容の確認

    else フロントエンドのバリデーションに<br />ひっかからなかった場合（正常系）
      フロントエンド(React) ->> サーバーサイド(API): API要求（スレッド作成）

      alt バックエンドのバリデーションに<br />ひっかかった場合（異常系）
          
          alt サーバーサイドでの場合
            サーバーサイド(API) ->> フロントエンド(React): エラー応答
            フロントエンド(React) ->> ブラウザ: エラーポップアップの表示
            ブラウザ ->> ユーザー: エラー内容の確認
          else データベースでの場合
            サーバーサイド(API) ->> データベース: スレッド作成情報の保存処理
            データベース ->> サーバーサイド(API): DBエラー情報の取得
            サーバーサイド(API) ->> フロントエンド(React): エラー応答
            フロントエンド(React) ->> ブラウザ: エラーポップアップの表示
            ブラウザ ->> ユーザー: エラー内容の確認
          end

      else バックエンドのバリデーションに<br />ひっかからなかった場合（正常系）
        サーバーサイド(API) ->> データベース: スレッド作成情報の保存処理
        データベース ->> サーバーサイド(API): スレッド作成成功応答及び、<br />データ返却、ページ遷移
        サーバーサイド(API) ->> フロントエンド(React): スレッド作成情報応答
        フロントエンド(React) ->> ブラウザ: スレッドページの表示
      end

    end
```
## コメント（レス）投稿機能
```mermaid
sequenceDiagram
    participant ユーザー
    participant ブラウザ
    participant フロントエンド(React)
    participant サーバーサイド(API)
    participant データベース

    %% スレッドページ表示
    ユーザー ->> ブラウザ: スレッドのリンクを押す
    ブラウザ -->> フロントエンド(React): スレッドページ情報要求
    フロントエンド(React) --> サーバーサイド(API): API要求（スレッドページ遷移）
    サーバーサイド(API)　--> フロントエンド(React)  : スレッドページ情報の返却
    フロントエンド(React) --> ブラウザ : ページレンダリング、<br />スレッドページの表示
    ブラウザ ->> ユーザー : スレッドページ画面の確認

    %% スレッド作成処理
    ユーザー ->> ブラウザ: スレッドページのフォームから内容を入力し、<br />投稿ボタンを押す
    ブラウザ ->> フロントエンド(React): レス投稿要求

    alt フロントエンドのバリデーションに<br />ひっかかった場合（異常系）
      フロントエンド(React) -->> ブラウザ: エラーポップアップの表示
      ブラウザ -->> ユーザー: エラー内容の確認

    else フロントエンドのバリデーションに<br />ひっかからなかった場合（正常系）
      フロントエンド(React) ->> サーバーサイド(API): API要求（レス投稿）

      alt バックエンドのバリデーションに<br />ひっかかった場合（異常系）
          
          alt サーバーサイドでの場合
            サーバーサイド(API) ->> フロントエンド(React): エラー応答
            フロントエンド(React) ->> ブラウザ: エラーポップアップの表示
            ブラウザ ->> ユーザー: エラー内容の確認
          else データベースでの場合
            サーバーサイド(API) ->> データベース: レス情報の保存処理
            データベース ->> サーバーサイド(API): DBエラー情報の取得
            サーバーサイド(API) ->> フロントエンド(React): エラー応答
            フロントエンド(React) ->> ブラウザ: エラーポップアップの表示
            ブラウザ ->> ユーザー: エラー内容の確認
          end

      else バックエンドのバリデーションに<br />ひっかからなかった場合（正常系）
        サーバーサイド(API) ->> データベース: レス情報の保存処理
        データベース ->> サーバーサイド(API): レス作成成功応答及び、<br />レスを含めたスレッドページデータ返却、<br />ページ遷移
        サーバーサイド(API) ->> フロントエンド(React): スレッドページ情報応答
        フロントエンド(React) ->> ブラウザ: スレッドページの表示
      end

    end
```

## スレッド検索機能
```mermaid
sequenceDiagram
    participant ユーザー
    participant ブラウザ
    participant フロントエンド(React)
    participant サーバーサイド(API)
    participant データベース

    %% 一覧ページ表示
    ユーザー ->> ブラウザ: スレッド検索画面遷移要求
    ブラウザ ->> フロントエンド(React): スレッド検索画面情報要求
    フロントエンド(React) --> サーバーサイド(API): API要求（スレッド検索ページ情報取得）
    サーバーサイド(API) --> データベース: スレッド一覧ページ情報取得<br />（DB値をページで使うなら）
    データベース -->> サーバーサイド(API): 必要なスレッドに関する情報を取得
    サーバーサイド(API) -->> フロントエンド(React): スレッド検索ページ情報を返却
    フロントエンド(React) -->> ブラウザ: スレッド検索ページ応答
    ブラウザ ->> ユーザー: スレッド検索ページ表示

    ユーザー ->> ブラウザ: スレッド検索要求
    ブラウザ ->> フロントエンド(React): スレッド検索要求
    フロントエンド(React) ->> サーバーサイド(API): API要求（スレッド検索）
    サーバーサイド(API) ->> データベース: スレッド検索
    データベース -->> サーバーサイド(API): 検索結果
    サーバーサイド(API) -->> フロントエンド(React): 検索結果応答
    フロントエンド(React) -->> ブラウザ: 検索結果応答
    ブラウザ ->> ユーザー: 検索結果表示

    %% スレッド検索処理
    ユーザー ->> ブラウザ: 検索ページのフォームから検索条件を入力し、<br />投稿ボタンを押す
    ブラウザ ->> フロントエンド(React): スレッド検索要求

    alt フロントエンドのバリデーションに<br />ひっかかった場合（異常系）
      フロントエンド(React) -->> ブラウザ: エラーポップアップの表示
      ブラウザ -->> ユーザー: エラー内容の確認

    else フロントエンドのバリデーションに<br />ひっかからなかった場合（正常系）
      フロントエンド(React) ->> サーバーサイド(API): API要求（検索処理）

      alt バックエンドのバリデーションに<br />ひっかかった場合（異常系）
          
          alt サーバーサイドでの場合
            サーバーサイド(API) ->> フロントエンド(React): エラー応答
            フロントエンド(React) ->> ブラウザ: エラーポップアップの表示
            ブラウザ ->> ユーザー: エラー内容の確認
          else データベースでの場合
            サーバーサイド(API) ->> データベース: スレッド検索処理
            データベース ->> サーバーサイド(API): DBエラー情報の取得
            サーバーサイド(API) ->> フロントエンド(React): エラー応答
            フロントエンド(React) ->> ブラウザ: エラーポップアップの表示
            ブラウザ ->> ユーザー: エラー内容の確認
          end

      else バックエンドのバリデーションにひっかからなかった場合（正常系）
        サーバーサイド(API) ->> データベース: スレッド検索処理
        データベース ->> サーバーサイド(API): 検索処理成功応答及び、<br />スレッドのURLを含めた検索ページデータ返却、<br />ページ遷移
        サーバーサイド(API) ->> フロントエンド(React): 検索ページ情報応答
        フロントエンド(React) ->> ブラウザ: 検索ページの表示
      end

    end
```

## 独自のユーザーネーム設定機能
```mermaid
sequenceDiagram
    participant ユーザー
    participant ユーザー
    participant ブラウザ
    participant フロントエンド(React)
    participant ローカルストレージ

    ユーザー ->> ブラウザ: 設定ボタンを押下<br />→ポップアップからユーザーネーム入力
    ブラウザ ->> フロントエンド(React): ユーザーネーム設定要求
    フロントエンド(React) ->> ローカルストレージ: ユーザーネーム保存
    ローカルストレージ -->> フロントエンド(React): 保存成功応答、<br />ローカルストレージの値を設定
    フロントエンド(React) -->> ブラウザ: ユーザーネーム保存成功応答、<br />ページレンダリングでヘッダーに表示
    ブラウザ -->> ユーザー: ユーザーネームを確認できる
```